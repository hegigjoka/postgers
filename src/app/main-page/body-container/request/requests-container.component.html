<mat-drawer-container [hasBackdrop]="true" (backdropClick)="backing()">
  <mat-drawer class="drawer-request" #request position="end">
    <router-outlet (deactivate)="updating()"></router-outlet>
  </mat-drawer>
  <mat-drawer-content>
    <div class="col-12">
      <div class="dropdown">
        <h2 class="dropdown-toggle" id="requestCategory" data-toggle="dropdown">{{title}}</h2>
        <div class="dropdown-menu" aria-labelledby="requestCategory">
          <a class="dropdown-item" (click)="all()">All</a>
          <a class="dropdown-item" (click)="onlyMR()">My Requests</a>
          <a class="dropdown-item" (click)="onlyPA()">Pending Action</a>
        </div>
      </div>
      <hr>
    </div>
    <div class="col-12">
      <table class="table table-striped">
        <thead>
        <tr>
          <th>{{fields?.requestTypeId?.fieldLabel}}</th>
          <th>{{fields?.insertDate?.fieldLabel}}</th>
          <th>{{fields?.expireDate?.fieldLabel}}</th>
          <th>{{fields?.validationDate?.fieldLabel}}</th>
          <th [ngClass]="{'no-employee': reqType === 'me'}">Employee</th>
          <th>{{fields?.employeeNotes?.fieldLabel}}</th>
          <th>{{fields?.pendingActionFrom?.fieldLabel}}</th>
          <th>{{fields?.status?.fieldLabel}}</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let request of requests?.list" class="tuple" (click)="openRequest(request?.id, request?.labelMap?.requestTypeId)">
          <td>{{request?.labelMap?.requestTypeId | multiPurposePipe: 'hasValue'}}</td>
          <td>{{request?.insertDate | multiPurposePipe: 'hasDateValue' | date: 'medium'}}</td>
          <td>{{request?.expireDate | multiPurposePipe: 'hasDateValue' | date: 'medium'}}</td>
          <td>{{request?.validationDate | multiPurposePipe: 'hasDateValue' | date: 'medium'}}</td>
          <td [ngClass]="{'no-employee': reqType === 'me'}">{{request?.labelMap?.employeeId | multiPurposePipe: 'hasValue'}}</td>
          <td>{{request?.employeeNotes | multiPurposePipe: 'hasValue' | multiPurposePipe: 'longNote'}}</td>
          <td>{{request?.labelMap?.pendingActionFrom | multiPurposePipe: 'hasValue'}}</td>
          <td>{{request?.labelMap?.status | multiPurposePipe: 'hasValue'}}</td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="col-3 paginate">
      <table border="0">
        <tr>
          <td>
            <mat-icon class="prev" (click)="pages(-10, requests?.totalPages)">first_page</mat-icon>
          </td>
          <td>
            <mat-icon class="prev" (click)="pages(-1, requests?.totalPages)">chevron_left</mat-icon>
          </td>
          <td>
            <div class="page-number">
              {{paginate}} of {{requests?.totalPages}}
            </div>
          </td>
          <td>
            <mat-icon class="next" (click)="pages(1, requests?.totalPages)">chevron_right</mat-icon>
          </td>
          <td>
            <mat-icon class="next" (click)="pages(10, requests?.totalPages)">last_page</mat-icon>
          </td>
        </tr>
      </table>
      <div class="total-records">( {{requests?.totalRecords}} )</div>
    </div>
    <div class="new-request">
      <div class="new-sub" (click)="openRequest('new', 'Substituted Holidays')">S</div>
      <div class="new-sub-banner">Substitute Days</div>
      <div class="new-mt" (click)="openRequest('new', 'Badge Fail')">MB</div>
      <div class="new-mt-banner">Missing Badge</div>
      <div class="new-mission" (click)="openRequest('new', 'Mission')">M</div>
      <div class="new-mission-banner">Mission</div>
      <div class="new-holiday" (click)="openRequest('new', 'Holiday and Permission')">H</div>
      <div class="new-holiday-banner">Holidays</div>
      <div class="new-xh" (click)="openRequest('new', 'Extra Hours')">xH</div>
      <div class="new-xh-banner">Extra Hours</div>
      <div class="new">+</div>
    </div>
  </mat-drawer-content>
</mat-drawer-container>
